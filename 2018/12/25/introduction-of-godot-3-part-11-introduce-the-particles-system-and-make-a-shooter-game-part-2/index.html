<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Favicon-->
    <!-- Changed by me, before:href="favicon/favicon.ico", after:href="http://liuqingwen.me/favicon/favicon.ico"  -->
    <!-- Sample: <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> -->
    <link rel="icon" href="/favicon/favicon.ico" type="image/x-icon">
    
        <script>
            //added by my blog of "liuqingwen.me"
            var url = "anhognda.com";
            var host = window.location.host;
            if(host == url || host == "www." + url) {
                document.location.href = "http://" + host;
            }
        </script>
    

    <!-- MathJax supported added by me -->
    

    <!-- Keywords, added by me -->
    
        <meta name="keywords" content="åˆ˜åº†æ–‡, åšå®¢, Godot, æ¸¸æˆå¼€å‘, æ–‡ç« æ•™ç¨‹, Java, Python, Kotlin, Android, iOS, Swift, å®‰å“å¼€å‘, å­¦ä¹ ">
    

    <!--Description-->
    
        <meta name="description" content="This is a simple blog use Hexo, called Liuqingwen&#39;s last blog, all about of interesting things of Kotlin, Web, Swift, Game, 3D and life.">
    

    <!--Author-->
    
        <meta name="author" content="Liuqingwen">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åä¸€ï¼šGodotä¸­çš„ç²’å­ç³»ç»Ÿä¸å°„å‡»æ¸¸æˆï¼ˆä¸‹ï¼‰"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="A Vegetables Bird&#39;s Blog"/>

    <!--Page Cover-->
    
        <meta property="og:image" content=""/>
    

    <!-- Title -->
    
    <title>Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åä¸€ï¼šGodotä¸­çš„ç²’å­ç³»ç»Ÿä¸å°„å‡»æ¸¸æˆï¼ˆä¸‹ï¼‰ - A Vegetables Bird&#39;s Blog</title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/sass/main.css">


    <!-- Custom CSS added by me -->
    
<link rel="stylesheet" href="/css/custom.css">

    <!-- Calendar CSS added by me -->
    
<link rel="stylesheet" href="/css/calendar.css">


    <!--[if lt IE 8]>
        
<script src="/js/ie/html5shiv.js"></script>

    <![endif]-->

    <!--[if lt IE 8]>
        
<link rel="stylesheet" href="/sass/ie8.css">

    <![endif]-->

    <!--[if lt IE 9]>
        
<link rel="stylesheet" href="/sass/ie9.css">

    <![endif]-->

    <!-- Gallery 
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" /> -->
    <link href="https://cdn.bootcss.com/featherlight/1.7.13/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-97319413-1', 'auto');
        ga('send', 'pageview');

    </script>



<meta name="generator" content="Hexo 4.2.1"></head>

<body>

    <div id="wrapper">

        <!-- Menu -->
        <!-- Header -->
<header id="header">
    <!-- outer added by me, 2018-12-17, liuqingwen.me -->
    <div class="outer">
        <div>
            <ul>
                
                    <li>
                        <a href="/"><i class="fa fa-home fa-fw"></i>&nbsp;HOME</a>
                    </li>
                
                    <li>
                        <a href="/archives"><i class="fa fa-archive fa-fw"></i>&nbsp;ARCHIVES</a>
                    </li>
                
                    <li>
                        <a href="/tags"><i class="fa fa-tags fa-fw"></i>&nbsp;TAGS</a>
                    </li>
                
                    <li>
                        <a href="/about"><i class="fa fa-user fa-fw"></i>&nbsp;ABOUT</a>
                    </li>
                
                <li class="search">
                    <a href="/tags">
                        <span class="fa-stack"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-search fa-stack-1x"></i>&nbsp;
                        </span>SEARCH</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="inner">

        <!-- Logo -->
        <!-- Changes: config.root variable added -->
        <a href="/" class="logo">
            <span class="symbol"><img src="/images/logo.png" alt="Logo" /></span>
            <span class="title">A Vegetables Bird's Blog</span>
        </a>

        <!-- Added the search icon -->
        <a href="/tags" class="logo" style="float: right; ">
            <span class="symbol"><i class="fa fa-search"></i></span>
            <!-- <img src="/tipuesearch/search.png" alt="Search" /> -->
        </a>

        <!-- Nav -->
        <nav>
            <ul>
                <li><a href="#menu">Menu</a></li>
            </ul>
        </nav>

    </div>
</header>

<!-- Menu -->
<nav id="menu">
    <h2>Menu</h2>
    <ul>
        
            <li>
                <a href="/">Home</a>
            </li>
        
            <li>
                <a href="/archives">Archives</a>
            </li>
        
            <li>
                <a href="/tags">Tags</a>
            </li>
        
            <li>
                <a href="/about">About</a>
            </li>
        
        <li style="color: #4cce18;">
            <!-- <a href="/tags">
                <span><img src="/tipuesearch/search.png" alt="Search" style="width: 2em; height: 2em; vertical-align: middle;" />Search</span>
            </a> -->
            <a href="/tags"><i class="fa fa-search"></i>&nbsp;Search Blog Content</a>
        </li>
    </ul>

    <!--Added by me, for calendar widget-->
    <div id="widget-calender-liuqingwen">
        <div class="widget tag">
    <h3 class="title">calendar</h3>
    <div id="calendar"></div>
</div>
    </div>
</nav>


        <div id="main">
            <div class="inner">

                <!-- Main Content -->
                

    
    <h1 class="title">Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åä¸€ï¼šGodotä¸­çš„ç²’å­ç³»ç»Ÿä¸å°„å‡»æ¸¸æˆï¼ˆä¸‹ï¼‰</h1>
    <div class="meta">
        <span>2018-12-25</span>
        <span>  by Liuqingwen </span>
        
            <span> | Tags: <a href="/tags/Godot/">Godot</a></span>
        
        <span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Hits</span>
        <!-- author added by me -->
    </div>


    <!-- lazy-img-loading added by me -->
    
        <span class="image main"><img src="http://liuqingwen.me/images/imgloader.gif" data-echo="godot_cover.jpg" alt="" /></span>
    


<!-- Gallery -->


<!-- Added by me..................for tipue search plugin -->
<div id="tipue_search_content" style="display: none"></div>

<!-- Content -->
<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>ç»§ç»­è®²è§£æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå°æ¸¸æˆï¼šå¤ªç©ºå°„å‡»æ¸¸æˆï¼Œæœ¬ç¯‡ä¸º<a href="http://liuqingwen.me/2018/12/23/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-1/">ä¸Šä¸€ç¯‡æ–‡ç« </a>çš„ç»§ç»­ã€‚åœ¨ä¸Šä¸€èŠ‚ä¸­æˆ‘ç»™å¤§å®¶ä»‹ç»äº† <em>Particles2D</em> ç²’å­èŠ‚ç‚¹çš„ç›¸å…³å‚æ•°ä»¥åŠç®€å•çš„åº”ç”¨ï¼Œè¿™ä¸€èŠ‚åˆ™ä»‹ç»è¿™ä¸ªå°æ¸¸æˆä¸­çš„ä¸»è¦åœºæ™¯å’Œå…³é”®çš„ä»£ç å®ç°ã€‚</p>
<p>PS ï¼šåœ¨å†™æ–‡ç« çš„è¿™ä¸¤å¤©ï¼Œ Godot å®˜æ–¹åˆç´§å‡‘åœ°å‘å¸ƒäº†ç¬¬å››ä¸ª Alpha ç‰ˆæœ¬ï¼Œå¤§å®¶å¯ä»¥åˆ°è¿™é‡Œä¸‹è½½ï¼š <a href="https://downloads.tuxfamily.org/godotengine/3.1/alpha4/" target="_blank" rel="noopener">Godot 3.1 Alpha4</a> ï¼Œæœ¬ä»¥ä¸ºåœ£è¯èŠ‚å‰ä¼šå‘å¸ƒç¬¬ä¸€ä¸ª Beta ç‰ˆæœ¬ï¼Œç›®å‰æ¥çœ‹è¿˜ä¼šæœ‰ç¬¬äº”ä¸ª Alpha ç‰ˆæœ¬ï¼Œ Beta ç‰ˆæœ¬è‚¯å®šè¦ç­‰åˆ° 2019 å¹´å•¦ï¼å—¯ï¼Œçƒ­æƒ…æœŸå¾…ä¸­â€¦â€¦</p>
<blockquote>
<p>ä¸»è¦å†…å®¹ï¼šå¤ªç©ºå°„å‡»æ¸¸æˆåœºæ™¯ä¸ä»£ç ï¼ˆä¸‹ç¯‡ï¼‰<br>é˜…è¯»æ—¶é—´ï¼š 12 åˆ†é’Ÿ<br>æ°¸ä¹…é“¾æ¥ï¼š <a href="http://liuqingwen.me/2018/12/25/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-2/">http://liuqingwen.me/2018/12/25/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-2/</a><br>ç³»åˆ—ä¸»é¡µï¼š <a href="http://liuqingwen.me/introduction-of-godot-series/">http://liuqingwen.me/introduction-of-godot-series/</a>  </p>
</blockquote>
<h2 id="äºŒã€æ­£æ–‡"><a href="#äºŒã€æ­£æ–‡" class="headerlink" title="äºŒã€æ­£æ–‡"></a>äºŒã€æ­£æ–‡</h2><h3 id="æœ¬ç¯‡ç›®æ ‡"><a href="#æœ¬ç¯‡ç›®æ ‡" class="headerlink" title="æœ¬ç¯‡ç›®æ ‡"></a>æœ¬ç¯‡ç›®æ ‡</h3><ol>
<li>ä»‹ç» Godot ä¸­è‡ªå¸¦çš„ç²’å­ç³»ç»Ÿï¼ˆä¸Šç¯‡ï¼‰</li>
<li>äº†è§£å…¶ä»–å‡ ä¸ªå¸¸è§èŠ‚ç‚¹çš„ä½¿ç”¨ï¼ˆä¸Šç¯‡ï¼‰</li>
<li>æœ¬å°„å‡»æ¸¸æˆåœºæ™¯ä»‹ç»å’Œä»£ç </li>
</ol>
<h3 id="æ¸¸æˆæ‰€æœ‰åœºæ™¯"><a href="#æ¸¸æˆæ‰€æœ‰åœºæ™¯" class="headerlink" title="æ¸¸æˆæ‰€æœ‰åœºæ™¯"></a>æ¸¸æˆæ‰€æœ‰åœºæ™¯</h3><p>å¤ªç©ºå°„å‡»æ¸¸æˆçš„åœºæ™¯ä¸»è¦åˆ†ä¸ºï¼šç©å®¶ã€æ•Œäººï¼ˆå¤–æ˜Ÿäººå’Œå²©çŸ³ï¼‰ã€å­å¼¹ã€ UI ç•Œé¢ ã€å…¥å£ä¸»åœºæ™¯ç­‰ï¼Œæ¯ä¸ªåœºæ™¯çš„æ„é€ éƒ½å¾ˆç®€å•ï¼Œæ‰€åº”ç”¨åˆ°çš„å‡ ä¸ªæ–°èŠ‚ç‚¹æˆ‘ä¹Ÿåœ¨<a href="http://liuqingwen.me/2018/12/23/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-1/">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ä½œäº†ç®€çŸ­çš„ä»‹ç»ï¼Œå…¶ä»–èŠ‚ç‚¹ç›¸ä¿¡çœ‹è¿‡æˆ‘æœ¬ç³»åˆ—æ–‡ç« çš„æœ‹å‹éƒ½åº”è¯¥å¾ˆç†Ÿæ‚‰å•¦ï¼Œå“ˆå“ˆã€‚ :wink:</p>
<p><img src="godot_11_scenes.png" alt="æ‰€æœ‰åœºæ™¯"></p>
<p>æé†’å¤§å®¶çš„æ˜¯ï¼Œå­å¼¹åœºæ™¯æœ‰ä¸¤ä¸ªï¼š <code>Bullet.tscn</code> å’Œ <code>EnemyBullet.tscn</code> ï¼Œä»åå­—å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸€ä¸ªæ˜¯ç”¨äºç©å®¶å‘å°„çš„å­å¼¹ï¼Œä¸€ä¸ªæ˜¯æ•Œäººå‘å°„çš„å­å¼¹ï¼Œä»–ä»¬é™¤äº†<strong>å­å¼¹çš„å›¾ç‰‡ä¹Ÿå°±æ˜¯å¤–è§‚ä¸åŒ</strong>ä¹‹å¤–ï¼Œå…¶ä»–éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ä»£ç éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œå› ä¸º <code>EnemyBullet.tscn</code> å°±æ˜¯ç›´æ¥ä» <code>Bullet.tscn</code> <strong>ç»§æ‰¿</strong>å®ä¾‹åŒ–è€Œæ¥ã€‚ï¼ˆå¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªåœºæ™¯ï¼Ÿè¿˜è®°å¾— ğŸ”— è¿™ä¸ªå›¾æ ‡å—ï¼Ÿæ‰¾ä¸€æ‰¾å§ã€‚ï¼‰</p>
<p>æµè§ˆä¸€ä¸‹æ‰€æœ‰åœºæ™¯â€œæ„é€ å›¾â€ï¼Œæ¥ä¸‹æ¥ç®€å•åœ°ä¸€ä¸€ä»‹ç»ä¸‹æ‰€æœ‰åœºæ™¯åŠå…¶æ ¸å¿ƒä»£ç éƒ¨åˆ†ã€‚</p>
<h4 id="1-å­å¼¹åœºæ™¯"><a href="#1-å­å¼¹åœºæ™¯" class="headerlink" title="1. å­å¼¹åœºæ™¯"></a>1. å­å¼¹åœºæ™¯</h4><p>é¦–å…ˆæ˜¯å­å¼¹åœºæ™¯ï¼Œå®ƒæ¯”è¾ƒç‰¹æ®Šï¼Œæœ‰<strong>ä¸¤ä¸ª</strong>ã€‚å­å¼¹åœºæ™¯ä¸»è¦ç”¨äºç©å®¶å’Œæ•Œäººå‘å°„çš„å­å¼¹ï¼Œæ¯é¢—å­å¼¹åœ¨å‘å°„åä¼šä¸€ç›´å¾€ä¸€ä¸ªæ–¹å‘é£è¡Œï¼Œé£è¡Œè¿‡ç¨‹ä¸­æ£€æŸ¥æ˜¯å¦ä¸å…¶ä»–å¯¹è±¡ç›¸æ’ï¼Œç„¶ååœ¨ä»£ç ä¸­åšå‡ºç›¸åº”çš„å¤„ç†ï¼š</p>
<figure class="highlight python"><figcaption><span>Bullet.gd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">extends Area2D</span><br><span class="line"></span><br><span class="line">signal destroy_object(type)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­å¼¹ç§ç±»ï¼šç©å®¶ã€æ•Œäºº</span></span><br><span class="line">export(String, <span class="string">'player'</span>, <span class="string">'enemy'</span>) var type = <span class="string">'player'</span></span><br><span class="line"></span><br><span class="line">var _velocity = Vector2() <span class="comment"># å­å¼¹é€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line">func _process(delta):</span><br><span class="line">    self.position += _velocity * delta</span><br><span class="line"></span><br><span class="line">func _on_Bullet_area_entered(area):</span><br><span class="line">    <span class="comment"># æ•Œäººçš„å­å¼¹å‡»ä¸­ç©å®¶</span></span><br><span class="line">    <span class="keyword">if</span> area.is_in_group(<span class="string">'player'</span>) &amp;&amp; type == <span class="string">'enemy'</span>:</span><br><span class="line">        area.destroy()</span><br><span class="line">        self.queue_free()</span><br><span class="line">    <span class="comment"># å­å¼¹å‡»ä¸­æ•Œäººï¼Œå¯¹ç©å®¶å­å¼¹å’Œæ•Œäººå­å¼¹å¤„ç†ä¸åŒ</span></span><br><span class="line">    <span class="keyword">elif</span> area.is_in_group(<span class="string">'enemy'</span>) || area.is_in_group(<span class="string">'rock'</span>):</span><br><span class="line">        <span class="keyword">if</span> type == <span class="string">'player'</span>:</span><br><span class="line">            area.destroy()</span><br><span class="line">            var objectType = <span class="string">'enemy'</span> <span class="keyword">if</span> area.is_in_group(<span class="string">'enemy'</span>) <span class="keyword">else</span> <span class="string">'rock'</span></span><br><span class="line">            self.emit_signal(<span class="string">'destroy_object'</span>, objectType)</span><br><span class="line">        <span class="keyword">if</span> ! (area.is_in_group(<span class="string">'enemy'</span>) &amp;&amp; type == <span class="string">'enemy'</span>):</span><br><span class="line">            self.queue_free()</span><br><span class="line">    <span class="comment"># æ•Œäººçš„å­å¼¹å’Œç©å®¶å­å¼¹ç›¸æ’</span></span><br><span class="line">    <span class="keyword">elif</span> area.is_in_group(<span class="string">'bullet'</span>) &amp;&amp; area.type != type:</span><br><span class="line">        area.queue_free()</span><br><span class="line">        self.queue_free()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­å¼¹é£å‡ºå±å¹•</span></span><br><span class="line">func _on_VisibilityNotifier2D_screen_exited():</span><br><span class="line">    self.queue_free()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å­å¼¹é€Ÿåº¦</span></span><br><span class="line">func start(velocity):</span><br><span class="line">    velocity = velocity</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆå¦‚ä½•åœ¨ç©å®¶å’Œæ•Œäººåœºæ™¯ä¸­åˆ†åˆ«ä½¿ç”¨è¿™ä¸¤ä¸ªå­å¼¹åœºæ™¯å‘¢ï¼Ÿåªéœ€è¦åœ¨ <em>Player</em> è„šæœ¬ä»¥åŠ <em>Alien</em> è„šæœ¬ä»£ç ä¸­ï¼Œæ·»åŠ ä¸€å¥ä»£ç å³å¯ï¼š <code>export(PackedScene) var bulletScene</code> ï¼Œä¹Ÿå°±æ˜¯æŠŠå„è‡ªè¦ç”¨åˆ°çš„å­å¼¹åœºæ™¯æš´éœ²ä¸ºæ˜¾ç¤ºåœ¨ç¼–è¾‘å™¨ä¸­çš„å˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ‹–æ‹½ç›¸å¯¹åº”çš„å­å¼¹åœºæ™¯åˆ°å„è‡ªçš„ <code>bulletScene</code> å±æ€§ä¸­ã€‚</p>
<p><strong>ä¸€ä¸ªåœºæ™¯ï¼ˆèŠ‚ç‚¹ï¼‰åº”ç”¨åˆ°å¤šä¸ªåœºåˆ</strong>åœ¨æ¸¸æˆä¸­æ˜¯å¾ˆå¸¸è§çš„ï¼Œå¯¹äºå­å¼¹åœºæ™¯é™¤äº†æˆ‘æ‰€é‡‡ç”¨çš„è¿™ç§å¤„ç†æ–¹å¼ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§å¸¸è§çš„æ–¹æ³•ï¼šåªéœ€è¦è®¾ç½®ä¸€ä¸ª <code>Bullet.tscn</code> å­å¼¹åœºæ™¯ï¼Œç„¶ååœ¨ä»£ç ä¸­åˆ›å»ºå­å¼¹çš„æ—¶å€™ï¼ŒåŠ¨æ€è®¾ç½®å­å¼¹çš„æè´¨å°±å¯ä»¥äº†ã€‚è¿™æ ·ä¸€ä¸ªå­å¼¹åœºæ™¯å°±èƒ½è½»æ¾åœ°è¢«ç©å®¶å’Œæ•Œäººåˆ†åˆ«ä½¿ç”¨ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var playerBulletImageTexture = load(<span class="string">'res://Assets/Images/player_bullet.png'</span>);</span><br><span class="line">var enemyBulletImageTexture = load(<span class="string">'res://Assets/Images/enemy_bullet.png'</span>);</span><br><span class="line"></span><br><span class="line">func setType(type):</span><br><span class="line">    match type:</span><br><span class="line">        <span class="string">'player'</span>: $Sprite.texture = playerBulletImageTexture;</span><br><span class="line">        <span class="string">'enemy'</span>: $Sprite.texture = enemyBulletImageTexture;</span><br></pre></td></tr></table></figure>

<p>å…³äºèµ„æºåŠ è½½å‡½æ•° <code>load()</code> æˆ‘æƒ³åœ¨åé¢ä¼šç»§ç»­è®¨è®ºã€‚ä¸€èˆ¬æ¸¸æˆä¸­ä¼šä¼˜å…ˆä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œä½†æ˜¯ç¬¬ä¸€ç§æ–¹å¼æ›´åŠ é€‚åˆæ–°æ‰‹ï¼Œè€Œä¸”æ‰©å±•æ€§ä¹Ÿæ›´å¥½ï¼Œæ¯”å¦‚æˆ‘æƒ³åœ¨æ•Œäººçš„å­å¼¹åœºæ™¯ä¸­å†åŠ ä¸€äº›å…¶ä»–çš„æ•ˆæœï¼Œè®©å®ƒå˜å¾—æ›´é…·ï¼Œè¿™éƒ½æ˜¯éå¸¸æ–¹ä¾¿ä¸”ç›´æ¥çš„ï¼Œå¦å¤–ç»“åˆ <code>export(PackedScene)</code> æ›´å¯ä»¥è½»æ¾çš„æ‹–æ‹½å…¶ä»–åœºæ™¯åˆ°å¯¹åº”çš„åœºæ™¯å±æ€§ä¸‹ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå¤§å®¶å¤šå¤šæ„Ÿå—ä¸‹ã€‚</p>
<h4 id="2-èƒŒæ™¯åœºæ™¯"><a href="#2-èƒŒæ™¯åœºæ™¯" class="headerlink" title="2. èƒŒæ™¯åœºæ™¯"></a>2. èƒŒæ™¯åœºæ™¯</h4><p>å…³äºèƒŒæ™¯å›¾ç‰‡æˆ‘å·²ç»åœ¨<a href="http://liuqingwen.me/2018/12/23/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-1/">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­è¯´æ˜è¿‡äº†ï¼Œä¸è¿‡å¹¶æ²¡æœ‰è¯¦ç»†é˜è¿°å…¶åŸç†ï¼Œä¹Ÿæ²¡æœ‰æä¾›ä»»ä½•ä»£ç ï¼Œå…¶å®èƒŒæ™¯åœºæ™¯çš„ä»£ç æ˜¯æœ€å°‘çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extends ParallaxBackground</span><br><span class="line"></span><br><span class="line">export(float) var scrollSpeed = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">func _process(delta):</span><br><span class="line">    <span class="comment"># æ‰‹åŠ¨æ§åˆ¶èƒŒæ™¯æ»šåŠ¨</span></span><br><span class="line">    self.scroll_offset.y -= scrollSpeed * delta</span><br></pre></td></tr></table></figure>

<p>ç„¶åå‚è€ƒä¸€ä¸‹å…¶ç›¸å…³èŠ‚ç‚¹çš„è®¾ç½®ä½ å°±èƒ½æ˜ç™½å…¶ä¸­çš„é“ç†ï¼š</p>
<p><img src="godot_11_parallax_layer.png" alt="godot_11_parallax_layer.png"></p>
<p>å‰é¢ä¸¤ä¸ªèŠ‚ç‚¹å¾ˆå¥½ç†è§£ï¼Œå®é™…å¼€å‘ä¸­ï¼Œå¯¹äº ParallaxBackground èƒŒæ™¯èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåº”ç”¨äºæœ‰<em>æ‘„åƒæœº*èŠ‚ç‚¹çš„æ¸¸æˆä¸­ï¼Œè¿™æ ·èƒŒæ™¯ä¼šè‡ªåŠ¨è·Ÿéšæ‘„åƒæœºæ»šåŠ¨ï¼Œåœ¨ 2D æ¸¸æˆä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®å¤šå±‚èƒŒæ™¯ï¼Œæ¯”å¦‚é è¿‘ç©å®¶çš„æ ‘æœ¨ã€è¿œç¦»ç©å®¶çš„å±±å²­ã€æœ€è¿œæ–¹çš„å¤ªé˜³æˆ–è€…æœˆäº®ç­‰ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¶Šè¿œçš„ç‰©ä½“æ»šåŠ¨é€Ÿåº¦è¶Šæ…¢ï¼Œä¹Ÿå°±æ˜¯ *Scale</em> å±æ€§å€¼è¶Šå°ï¼Œè¶Šè¿‘åˆ™æ»šåŠ¨è¶Šå¿«ï¼Œå¤§å®¶å¯ä»¥ç»“åˆä¹‹å‰çš„å›¾ç‰‡ä½“ä¼šä¸€ä¸‹ã€‚é‚£ä¹ˆï¼Œåƒæœ¬æ¸¸æˆä¸­æ²¡æœ‰æ‘„åƒæœºè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿä¾ç„¶å¾ˆç®€å•ï¼Œå¦‚ä¸Šä»£ç ï¼Œ<strong>æ‰‹åŠ¨è®¾ç½®èƒŒæ™¯çš„æ»šåŠ¨å±æ€§</strong>å°±å¯ä»¥å•¦ã€‚</p>
<h4 id="3-æ•Œäººåœºæ™¯"><a href="#3-æ•Œäººåœºæ™¯" class="headerlink" title="3. æ•Œäººåœºæ™¯"></a>3. æ•Œäººåœºæ™¯</h4><p>æ¸¸æˆä¸­æ•Œäººä¸»è¦æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¤–æ˜Ÿäººï¼Œå¦ä¸€ç§æ˜¯å è½çš„å²©çŸ³ï¼Œè„šæœ¬ä»£ç ä¹Ÿéƒ½å¾ˆå¥½ç†è§£ï¼Œè¿™é‡Œæˆ‘ç»™æ•Œäººæ·»åŠ äº†ä¸€äº›æœ‰è¶£çš„éšæœºå…ƒç´ ï¼Œå®ƒä»¬å¯ä»¥æ°´å¹³ç§»åŠ¨å¹¶ä¸”éšæœºå‘å°„å­å¼¹ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><figcaption><span>Alien.gd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç§»åŠ¨å¹¶å‘å°„ï¼Œç”Ÿå‘½å‘¨æœŸå†…æ— é™å¾ªç¯</span></span><br><span class="line">func _moveAndShoot():</span><br><span class="line">    <span class="comment"># ç¬¬ä¸€æ¬¡ç§»åŠ¨ï¼Œä¸å‘å°„å­å¼¹</span></span><br><span class="line">    var nextMovement = rand_range(<span class="number">0.5</span>, <span class="number">1.5</span>)</span><br><span class="line">    <span class="keyword">yield</span>(self.get_tree().create_timer(nextMovement), <span class="string">"timeout"</span>)</span><br><span class="line">    <span class="comment"># 2/3å‡ ç‡å‘ç”Ÿæ°´å¹³ç§»åŠ¨ï¼Œå¦åˆ™åªåšå‚ç›´è¿åŠ¨</span></span><br><span class="line">    var shouldMove = randi() % <span class="number">3</span> &gt;= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> shouldMove:</span><br><span class="line">        _hMovement = randi() % <span class="number">3</span> - <span class="number">1</span></span><br><span class="line">    nextMovement = rand_range(<span class="number">1.0</span>, <span class="number">1.5</span>)</span><br><span class="line">    <span class="keyword">yield</span>(self.get_tree().create_timer(nextMovement, false), <span class="string">"timeout"</span>)</span><br><span class="line">    _hMovement = <span class="number">0</span></span><br><span class="line">    <span class="comment"># å¦‚æœåœ¨å±å¹•èŒƒå›´å†…ï¼Œåˆ™å‘å°„å­å¼¹</span></span><br><span class="line">    <span class="keyword">if</span> _isInShootableArea():</span><br><span class="line">        _shoot()</span><br><span class="line">    <span class="comment"># ç»§ç»­ä¸‹ä¸€è½®æ“ä½œ</span></span><br><span class="line">    _moveAndShoot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># çœç•¥ä»£ç â€¦â€¦</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼š<em>å¤–æ˜Ÿäººè¿›å…¥æ¸¸æˆåœºæ™¯åï¼Œéšæœºé£è¡Œä¸€æ®µæ—¶é—´ï¼Œéšåæœ‰ä¸€å®šçš„æ¦‚ç‡å‘ç”Ÿæ°´å¹³ç§»åŠ¨ï¼Œæ¥ä¸‹æ¥åˆ¤æ–­å¤–æ˜Ÿäººæ˜¯å¦åœ¨å±å¹•èŒƒå›´å†…ï¼Œåœ¨èŒƒå›´å†…åˆ™å‘å°„ä¸€é¢—å­å¼¹</em>ã€‚æ–¹æ³•ä¸­æˆ‘ä½¿ç”¨äº†å¾ˆå¤šéšæœºæ—¶é—´èŠ‚ç‚¹ï¼Œä¹Ÿæ˜¯ä¸ºäº†ä¸°å¯Œæ¸¸æˆåœºæ™¯ï¼Œè®©æ¸¸æˆç¨å¾®æœ‰ç‚¹æŒ‘æˆ˜æ€§å§ã€‚</p>
<p>å¯¹äºå²©çŸ³åœºæ™¯çš„ä»£ç æˆ‘å°±ä¸è´´å‡ºæ¥äº†ï¼Œå²©çŸ³åªæœ‰æ»šåŠ¨å’Œä¸€å®šå¤§å°çš„éšæœºç¼©æ”¾ï¼Œä»£ç å¾ˆç®€å•ï¼Œä¸å†å•°å—¦ã€‚</p>
<h4 id="4-çˆ†ç‚¸åœºæ™¯"><a href="#4-çˆ†ç‚¸åœºæ™¯" class="headerlink" title="4. çˆ†ç‚¸åœºæ™¯"></a>4. çˆ†ç‚¸åœºæ™¯</h4><p>çˆ†ç‚¸åœºæ™¯ä½¿ç”¨äº† <em>Particles2D</em> ç²’å­èŠ‚ç‚¹ï¼Œä¸€ä¸ªçˆ†ç‚¸åœºæ™¯æˆ‘ä½¿ç”¨åœ¨äº†è¿™ä¸‰ä¸ªåœ°æ–¹ï¼šå²©çŸ³çˆ†ç‚¸ã€æ•Œäººçˆ†ç‚¸ä»¥åŠç©å®¶çˆ†ç‚¸ã€‚ä»–ä»¬çš„å¤„ç†æ–¹å¼ç¨å¾®ä¸åŒï¼Œè¿™é‡Œå¯ä»¥ä»ä»£ç ä¸­çœ‹å‡ºæ¥ï¼š</p>
<figure class="highlight python"><figcaption><span>Explosion.gd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çˆ†ç‚¸å¯¹è±¡çš„ç±»å‹ï¼šå²©çŸ³ã€æ•Œäººã€ç©å®¶</span></span><br><span class="line">var type = <span class="string">'rock'</span> setget _setType</span><br><span class="line"></span><br><span class="line">func _ready():</span><br><span class="line">    match type:</span><br><span class="line">        <span class="string">'rock'</span>:</span><br><span class="line">            self.amount = <span class="number">40</span></span><br><span class="line">            _audioPlayer.stream = rockAudio</span><br><span class="line">        <span class="string">'player'</span>:</span><br><span class="line">            <span class="comment"># å»¶é•¿ç©å®¶çˆ†ç‚¸ç‰¹æ•ˆçš„æ—¶é•¿</span></span><br><span class="line">            _lifeTimer.wait_time = <span class="number">2.0</span></span><br><span class="line">            _audioPlayer.stream = playerAudio</span><br><span class="line">        <span class="string">'alien'</span>:</span><br><span class="line">            self.amount = <span class="number">50</span></span><br><span class="line">            _audioPlayer.stream = alienAudio</span><br><span class="line">            _audioPlayer.pitch_scale = <span class="number">2.0</span></span><br><span class="line">    _audioPlayer.play()</span><br><span class="line"></span><br><span class="line"><span class="comment"># çœç•¥ä»£ç â€¦â€¦</span></span><br></pre></td></tr></table></figure>

<p>å—¯ï¼ŒåŒºåˆ«åœ¨äºä¸‰ç§çˆ†ç‚¸çš„éŸ³æ•ˆä¸åŒï¼Œç²’å­æ•°é‡ç¨å¾®æœ‰ç‚¹å·®åˆ«è€Œå·²ã€‚å…³äºç²’å­æˆ‘åœ¨<a href="http://liuqingwen.me/2018/12/23/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-1/">ä¸Šç¯‡æ–‡ç« </a>ä¸­å·²ç»è¯¦ç»†è®²è¿°ï¼Œå¦‚æœæœ‰ä¸æ¸…æ¥šçš„ï¼Œå¤§å®¶å¯ä»¥ä¸‹è½½æºç å‚è€ƒä¸€ä¸‹ã€‚ :laughing:</p>
<h4 id="5-ç©å®¶åœºæ™¯"><a href="#5-ç©å®¶åœºæ™¯" class="headerlink" title="5. ç©å®¶åœºæ™¯"></a>5. ç©å®¶åœºæ™¯</h4><p>ç©å®¶åœºæ™¯å°±éå¸¸ç†Ÿæ‚‰å•¦ï¼Œä¸»è¦æ˜¯æ§åˆ¶ç©å®¶çš„ç§»åŠ¨ï¼Œè¿˜æœ‰å­å¼¹çš„å‘å°„ï¼š</p>
<figure class="highlight python"><figcaption><span>Player.gd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°„å‡»å‡½æ•°</span></span><br><span class="line">func _shoot():</span><br><span class="line">    <span class="keyword">if</span> bulletScene == null:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># ç”Ÿæˆä¸€ä¸ªå­å¼¹å¯¹è±¡</span></span><br><span class="line">    var bullet = bulletScene.instance()</span><br><span class="line">    <span class="comment"># è®¾ç½®å­å¼¹çš„å…¨å±€ä½ç½®</span></span><br><span class="line">    bullet.position = _shootPoint.global_position</span><br><span class="line">    <span class="comment"># è°ƒç”¨å­å¼¹çš„å…¬å¼€æ–¹æ³•ï¼Œè®¾ç½®é€Ÿåº¦</span></span><br><span class="line">    bullet.start(Vector2(<span class="number">0</span>, - bulletSpeed))</span><br><span class="line">    <span class="comment"># è¿æ¥å­å¼¹çš„ä¿¡å·</span></span><br><span class="line">    bullet.connect(<span class="string">'destroy_object'</span>, self, <span class="string">'_on_Bullet_destroy_object'</span>)</span><br><span class="line">    <span class="comment"># æŠŠå­å¼¹æ·»åŠ åˆ°æ¸¸æˆrootæ ¹èŠ‚ç‚¹</span></span><br><span class="line">    self.get_tree().get_root().add_child(bullet)</span><br><span class="line">    <span class="comment"># éŸ³æ•ˆ</span></span><br><span class="line">    _shootSound.play()</span><br><span class="line"></span><br><span class="line"><span class="comment"># çœç•¥ä»£ç â€¦â€¦</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ ¸å¿ƒä»£ç åœ¨äº <code>self.get_tree().get_root().add_child(bullet)</code> è¿™ä¸€å¥ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘æŠŠå‘å°„å­å¼¹åç”Ÿæˆçš„å­å¼¹èŠ‚ç‚¹æ·»åŠ åˆ°äº†æ¸¸æˆçš„æ ¹èŠ‚ç‚¹ <code>root</code> ä¸‹ï¼Œè¿™æ ·ä¿è¯å‘å°„å‡ºå»çš„å­å¼¹å’Œç©å®¶æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</p>
<h4 id="6-æ¸¸æˆä¸»åœºæ™¯"><a href="#6-æ¸¸æˆä¸»åœºæ™¯" class="headerlink" title="6. æ¸¸æˆä¸»åœºæ™¯"></a>6. æ¸¸æˆä¸»åœºæ™¯</h4><p>ä¸»åœºæ™¯æ˜¯æ‰€æœ‰å­åœºæ™¯å’Œä»£ç çš„ç»„åˆï¼Œä¸»è¦è´Ÿè´£æ¸¸æˆçš„æ•´ä½“æ§åˆ¶ï¼Œå…³é”®ä»£ç åœ¨äºç”Ÿæˆå¹¶æ·»åŠ å½“å‰å…³å¡çš„æ‰€æœ‰æ•Œäººï¼ŒåŒ…æ‹¬å²©çŸ³å’Œå¤–æ˜Ÿäººï¼Œå¦å¤–åœ¨ <code>_process(delta)</code> æ–¹æ³•ä¸­è¿˜ä¼šä¸æ–­åœ°åˆ¤æ–­æ•Œäººæ˜¯å¦å·²ç»è¢«æ¶ˆç­å®Œæˆ–è€…æ¸¸æˆæ˜¯å¦å·²ç»ç»“æŸã€‚</p>
<figure class="highlight python"><figcaption><span>Game.gd</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">var _isGameOver = false <span class="comment"># æ¸¸æˆæ˜¯å¦ç»“æŸ</span></span><br><span class="line">var _score = <span class="number">0</span>          <span class="comment"># åˆ†æ•°</span></span><br><span class="line">var _currentWave = <span class="number">0</span>    <span class="comment"># æ•Œäººæ³¢æ•°</span></span><br><span class="line">var _totalAliens = <span class="number">0</span>    <span class="comment"># æ•Œäººæ€»æ•°</span></span><br><span class="line">var _totalRocks = <span class="number">0</span>     <span class="comment"># å²©çŸ³æ€»æ•°</span></span><br><span class="line">var _enemyCount = <span class="number">-1</span>    <span class="comment"># è®¡æ•°ï¼šæ•Œäºº+å²©çŸ³</span></span><br><span class="line"></span><br><span class="line">func _process(delta):</span><br><span class="line">    <span class="comment"># å¦‚æœè®¡æ•°ä¸º0ï¼Œä¸”æ‰€æœ‰æ•Œäººè¢«ç§»é™¤åˆ™è¿›å…¥ä¸‹ä¸€æ³¢</span></span><br><span class="line">    <span class="keyword">if</span> !_isGameOver &amp;&amp; _enemyCount == <span class="number">0</span> &amp;&amp; _enemyContainer.get_child_count() == <span class="number">0</span>:</span><br><span class="line">        _enemyCount = <span class="number">-1</span></span><br><span class="line">        _nextLevel()</span><br><span class="line">    <span class="comment"># å¦‚æœæ¸¸æˆç»“æŸï¼Œä¸”æ‰€æœ‰æ•Œäººè¢«ç§»é™¤ï¼Œæ˜¾ç¤ºå¼€å§‹æŒ‰é’®</span></span><br><span class="line">    <span class="keyword">elif</span> _isGameOver &amp;&amp; _enemyContainer.get_child_count() == <span class="number">0</span>:</span><br><span class="line">        _ui.showStartButton()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ï¼ˆé‡æ–°ï¼‰å¼€å§‹æ¸¸æˆ</span></span><br><span class="line">func _restart():</span><br><span class="line">    _isGameOver = false</span><br><span class="line">    _score = <span class="number">0</span></span><br><span class="line">    _ui.updateScore(_score)</span><br><span class="line">    _currentWave = <span class="number">0</span></span><br><span class="line">    _audioPlayer.play()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ·»åŠ ç©å®¶åˆ°å½“å‰åœºæ™¯</span></span><br><span class="line">    <span class="keyword">if</span> playerScene != null:</span><br><span class="line">        var player = playerScene.instance()</span><br><span class="line">        player.connect(<span class="string">'game_over'</span>, self, <span class="string">'_on_Player_game_over'</span>)</span><br><span class="line">        player.connect(<span class="string">'score_updated'</span>, self, <span class="string">'_on_Player_score_updated'</span>)</span><br><span class="line">        player.position = _startPosition</span><br><span class="line">        self.add_child(player)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¼€å¯ç¬¬ä¸€å…³</span></span><br><span class="line">    _nextLevel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¶ˆç­ï¼ˆé¿å¼€ï¼‰æ‰€æœ‰æ•Œäººï¼Œè¿›å…¥ä¸‹ä¸€å…³</span></span><br><span class="line">func _nextLevel():</span><br><span class="line">    _currentWave += <span class="number">1</span></span><br><span class="line">    _ui.updateWave(_currentWave)</span><br><span class="line">    <span class="keyword">yield</span>(self.get_tree().create_timer(<span class="number">3.0</span>), <span class="string">'timeout'</span>)</span><br><span class="line">    _ui.hideMessage()</span><br><span class="line">    _calculateEnemies()</span><br><span class="line">    _enemyCount = _totalAliens + _totalRocks</span><br><span class="line">    _generateRocks()</span><br><span class="line">    _generateAliens()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯éš”ä¸€å®šæ—¶é—´ï¼ˆéšæœºï¼‰ç”Ÿæˆå²©çŸ³</span></span><br><span class="line">func _generateRocks():</span><br><span class="line">    <span class="keyword">if</span> rockScene == null:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(_totalRocks):</span><br><span class="line">        <span class="keyword">if</span> _isGameOver:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        var rock = rockScene.instance()</span><br><span class="line">        var yPosition = rand_range(<span class="number">-40</span>, <span class="number">-100</span>)</span><br><span class="line">        rock.position = Vector2(<span class="number">80</span> * (randi() % <span class="number">6</span>) + <span class="number">40</span>, yPosition)</span><br><span class="line">        _enemyContainer.add_child(rock)</span><br><span class="line">        _enemyCount -= <span class="number">1</span></span><br><span class="line">        var nextTime = rand_range(<span class="number">0.5</span>, <span class="number">1.5</span>)</span><br><span class="line">        <span class="keyword">yield</span>(self.get_tree().create_timer(nextTime, false), <span class="string">'timeout'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯éš”ä¸€å®šæ—¶é—´ï¼ˆéšæœºï¼‰ç”Ÿæˆæ•Œäºº</span></span><br><span class="line">func _generateAliens():</span><br><span class="line">    <span class="keyword">if</span> alienScene == null:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(_totalAliens):</span><br><span class="line">        <span class="keyword">if</span> _isGameOver:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        var alien = alienScene.instance()</span><br><span class="line">        var yPosition = rand_range(<span class="number">-40</span>, <span class="number">-100</span>)</span><br><span class="line">        alien.position = Vector2(<span class="number">60</span> * (randi() % <span class="number">5</span>) + <span class="number">80</span>, yPosition)</span><br><span class="line">        _enemyContainer.add_child(alien)</span><br><span class="line">        _enemyCount -= <span class="number">1</span></span><br><span class="line">        var nextTime = rand_range(<span class="number">1.0</span>, <span class="number">2.5</span>)</span><br><span class="line">        <span class="keyword">yield</span>(self.get_tree().create_timer(nextTime, false), <span class="string">'timeout'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®å½“å‰å…³å¡å¾—å‡ºæ•Œäººæ•°é‡</span></span><br><span class="line">func _calculateEnemies():</span><br><span class="line">    _totalAliens = _currentWave * <span class="number">2</span> + <span class="number">3</span></span><br><span class="line">    _totalRocks = _currentWave * <span class="number">3</span> + <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># çœç•¥ä»£ç â€¦â€¦</span></span><br></pre></td></tr></table></figure>

<p>åŒæ ·çœç•¥äº†ä¸€äº›ä»£ç ï¼Œè¿™é‡Œæ ¸å¿ƒå‡½æ•°æ˜¯ <code>_nextLevel()</code> æ–¹æ³•ï¼Œæ–¹æ³•é‡Œåˆè°ƒç”¨äº†å¦å¤–ä¸¤ä¸ªé‡è¦æ–¹æ³•ï¼š <code>_generateRocks()</code> å’Œ <code>_generateAliens()</code> ï¼Œé€šè¿‡å¤§é‡ä½¿ç”¨ <code>yield</code> å…³é”®å­—åˆ›å»ºæ—¶é—´è®¡æ—¶å™¨ï¼Œè¿™æ ·è®©æ¸¸æˆæ›´åŠ éšæœºæ€§ï¼Œè®©å¤ªç©ºæ˜¾å¾—æ›´åŠ çœŸå®ã€‚</p>
<h3 id="æ¸¸æˆå®Œå–„"><a href="#æ¸¸æˆå®Œå–„" class="headerlink" title="æ¸¸æˆå®Œå–„"></a>æ¸¸æˆå®Œå–„</h3><p>å¥½å•¦ï¼Œçœ‹ä¸€ä¸‹æˆ‘ä»¬çš„æˆæœå§ï¼Œæœ€ç»ˆæ•ˆæœä¸€è§ˆï¼š</p>

<video src="Spaceshooter.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"><img src="http://liuqingwen.me/2018/12/23/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-1/result_1.gif" alt="å¤ªç©ºå°„å‡»æ¸¸æˆ" title="å¤ªç©ºå°„å‡»æ¸¸æˆ" /></video>


<p>å¤§å®¶å¯ä»¥è‡ªå·±å°è¯•åšè¿™ä¹ˆä¸ªå°æ¸¸æˆï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½æºç ç„¶åè¿è¡Œï¼Œå¯¹äºçƒ­çˆ±æ¸¸æˆçš„æœ‹å‹ï¼Œæˆ‘è§‰å¾—ä¸åº”è¯¥åªåœç•™åœ¨â€œ play â€ä¸Šï¼Œè¿™ä¸ªæ¸¸æˆå¯ä»¥åšå¾—æ›´åŠ æœ‰è¶£ï¼Œä½ è§‰å¾—å‘¢ï¼Ÿæ‰€ä»¥ï¼Œæˆ‘å»ºè®®æ–°æ‰‹æœ‹å‹ä»¬å¯ä»¥ç»§ç»­å°è¯•å°è¯•ä»¥ä¸‹å‡ ç‚¹å®Œå–„ï¼š</p>
<ol>
<li>å¯ä»¥ä¸°å¯Œå­å¼¹ç³»ç»Ÿï¼Œæä¾›ä¸€äº›æ›´åŠ æœ‰è¶£çš„å­å¼¹æ ·å¼ã€å‘å°„æ–¹å¼</li>
<li>å¯ä»¥ä¸°å¯Œæ€ªç‰©ç³»ç»Ÿï¼Œæ¯”å¦‚æ¯ä¸ªå…³å¡è®¾ç½®ä¸€ä¸ªæœ€ç»ˆ BOSS ç­‰</li>
<li>å¯ä»¥å®ç°å¤šäººæ¸¸æˆï¼Œè¿™ä¸ªå¯¹æ–°æ‰‹æœ‰ç‚¹éš¾åº¦ï¼Œæˆ‘æƒ³ä»¥åä¼šè°ˆçš„</li>
</ol>
<p>åªæ˜¯è‡ªå·±çš„ä¸€ç‚¹ç‚¹æƒ³æ³•ï¼Œå“ˆå“ˆã€‚</p>
<h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>è¿™ä¸ªå°æ¸¸æˆçš„åˆ¶ä½œå°±æ­¤ç»“æŸå•¦ï¼Œæ€»ç»“ä¸€ä¸‹æœ¬ç¯‡ä¸Šä¸‹æ–‡çš„ä¸»è¦çŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li>Godot ä¸­è‡ªå¸¦ç²’å­ç³»ç»Ÿçš„ç›¸å…³å‚æ•°è¯´æ˜</li>
<li>æ¸¸æˆä¸­åº”ç”¨åˆ°çš„å…¶ä»–å‡ ä¸ªæœ‰ç”¨çš„èŠ‚ç‚¹</li>
<li>å¤ªç©ºå°„å‡»æ¸¸æˆçš„æ‰€æœ‰åœºæ™¯æ„é€ åŠå…¶å…³é”®ç‚¹</li>
<li>æ¸¸æˆä»£ç é€»è¾‘çš„æ ¸å¿ƒéƒ¨åˆ†è§£æ</li>
</ol>
<p>æœ¬ç¯‡çš„ Demo ä»¥åŠç›¸å…³ä»£ç å·²ç»ä¸Šä¼ åˆ° Github ï¼Œåœ°å€ï¼š <a href="https://github.com/spkingr/Godot-Demos" target="_blank" rel="noopener">https://github.com/spkingr/Godot-Demos</a> ï¼Œæœ€åï¼Œ<strong>åŸåˆ›ä¸æ˜“</strong>ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢å§ï¼ :smile:</p>
<blockquote>
<p>æˆ‘çš„åšå®¢åœ°å€ï¼š <a href="http://liuqingwen.me">http://liuqingwen.me</a> ï¼Œæˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘+ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼š <a href="https://cloud.tencent.com/developer/support-plan?invite_code=3sg12o13bvwgc" target="_blank" rel="noopener">https://cloud.tencent.com/developer/support-plan?invite_code=3sg12o13bvwgc</a> ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼š<br><img src="https://github.com/spkingr/test-git/raw/master/images/weixin/weixin_it_258.jpg" alt="ITè‡ªå­¦ä¸æˆæ‰"></p>
</blockquote>


<!-- Tags -->



<div class="tags">
    <a href="/tags/Godot/" class="button small">Godot</a>
</div>



<!-- Pre-Next post added by me -->
<!-- Added by me, for pre-post and next-post links in post page -->

    <div class="prev_next clearfix">
      
        <a href="/2018/12/30/introduction-of-godot-3-part-12-talk-about-collision-and-move-and-collide-vs-move-and-slide-in-kinematicbody2d/" class="alignleft prev" title="Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åäºŒï¼šGodotç¢°æ’ç†è®ºä»¥åŠKinematicBody2Dçš„ä¸¤ä¸ªæ–¹æ³•"><i class="fa fa-angle-double-left"></i>&nbsp;Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åäºŒï¼šGodotç¢°æ’ç†è®ºä»¥åŠKinematicBody2Dçš„ä¸¤ä¸ªæ–¹æ³•</a>
      
      
        &nbsp;<i class="fa fa-exchange separator"></i>&nbsp;
      
      
        <a href="/2018/12/23/introduction-of-godot-3-part-11-introduce-the-particles-system-and-make-a-shooter-game-part-1/" class="alignright next" title="Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åä¸€ï¼šGodotä¸­çš„ç²’å­ç³»ç»Ÿä¸å°„å‡»æ¸¸æˆï¼ˆä¸Šï¼‰">Godot3æ¸¸æˆå¼•æ“å…¥é—¨ä¹‹åä¸€ï¼šGodotä¸­çš„ç²’å­ç³»ç»Ÿä¸å°„å‡»æ¸¸æˆï¼ˆä¸Šï¼‰&nbsp;<i class="fa fa-angle-double-right"></i></a>
      
      <div class="clearfix"></div>
    </div>



<!-- Comments -->
<div>
    
    <hr />
    <h3>Comments:</h3>
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>



</div>



            </div>
        </div>

        <!-- Footer -->
<footer id="footer">
    <div class="inner">
        <section>
            <h2>About</h2>
            <div>
                This theme was initially developed by <a href="http://html5up.net" target="_blank">HTML5 UP</a>. It is adapted for Hexo by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a>. <br/>The source code is available on <a href="https://github.com/klugjo/hexo-theme-phantom" target="_blank">GitHub</a>. <br/><span id="busuanzi_container_site_pv">Total visits:&nbsp;<span id="busuanzi_value_site_pv"></span> , </span><span id="busuanzi_container_site_uv">Number of visitors:&nbsp;<span id="busuanzi_value_site_uv"></span> , staticstics powered by <a href="http://busuanzi.ibruce.info/" target="_blank" title="ä¸è’œå­ç»Ÿè®¡">ä¸è’œå­</a></span> <br/>Blog post content:&nbsp;<a href="http://liuqingwen.me/tags"><span><i class="fa fa-search"></i>&nbsp;æœç´¢åšå®¢å†…å®¹</span></a>
            </div>
        </section>
        <section>
            <h2>Follow</h2>
            <ul class="icons">
                
                    <li><a href="https://twitter.com/SpkingR" class="icon style2 fa-twitter" target="_blank" ><span class="label">Twitter</span></a></li>
                
                
                
                
                
                    <li><a href="https://github.com/spkingr" class="icon style2 fa-github" target="_blank" ><span class="label">GitHub</span></a></li>
                
                
                    <li><a href="https://plus.google.com/u/0/101955667782244488142" class="icon style2 fa-google-plus" target="_blank" ><span class="label">Google+</span></a></li>
                
                
                
                
                    <li><a href="about/" class="icon style2 fa-envelope-o" target="_blank" ><span class="label">Email</span></a></li>
                
                
                    <li><a href="/atom.xml" class="icon style2 fa-rss" target="_blank" ><span class="label">RSS</span></a></li>
                
            </ul>
            <ul class="links">
                <!-- Added by me, settings in config file -->
                
                    <li><a href="https://zhuanlan.zhihu.com/godot" class="icon style2 zhihu" target="_blank" ><span class="label">çŸ¥ä¹</span></a></li>
                
                
                    <li><a href="https://www.jianshu.com/u/756bad579149" class="icon style2 jianshu" target="_blank" ><span class="label">ç®€ä¹¦</span></a></li>
                
                
                    <li><a href="https://juejin.im/user/59d1d5b1f265da0656048d2b" class="icon style2 juejin" target="_blank" ><span class="label">æ˜é‡‘</span></a></li>
                
                
                    <li><a href="https://blog.csdn.net/SpkingR" class="icon style2 csdn" target="_blank" ><span class="label">CSDN</span></a></li>
                
                
                    <li><a href="https://www.indienova.com/u/liuqingwen" class="icon style2 indienova" target="_blank" ><span class="label">INDIE NOVA</span></a></li>
                
            </ul>
        </section>
        <ul class="copyright">
            <li>&copy; liuqingwen.me. All rights reserved</li>
            <li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
            <li>Hexo: <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></li>
            <li>About Me: <a href="/about">Liuqingwen</a></li>
            <li>å¤‡æ¡ˆå·: <a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener">æ¹˜ICPå¤‡14005092å·</a></li>
        </ul>
    </div>
</footer>
    </div>

    <!-- After footer scripts -->
    <!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- skel -->

<script src="/js/skel.min.js"></script>


<!-- Custom Code -->

<script src="/js/util.js"></script>


<!--[if lte IE 8]>

<script src="/js/ie/respond.min.js"></script>

<![endif]-->

<!-- Custom Code -->

<script src="/js/main.js"></script>

<!-- My Custom Code for add lazy-loading-image plugin -->

<script src="/scripts/echo.js"></script>


<script>
    echo.init({
        offset: 100,
        throttle: 250,
        unload: false,
        callback: function (element, op) {
            //Added by me!!! Help to display correctly in Mobile
            /*var entryContentWidth = $(element).width();
            if($(element).width() > entryContentWidth)
            {
                $(element).width("100%");
            }*/
            $(element).css({maxWidth: "100%"});
            // console.log(element, 'has been', op + 'ed');
        }
    });
  // echo.render(); is also available for non-scroll callbacks
</script>

<!-- Added for tipue search plugin....................... -->
<link href="/tipuesearch/css/tipuesearch.css" rel="stylesheet">
<script src="/tipuesearch/tipuesearch_set.js"></script>
<script src="/tipuesearch/tipuesearch.js"></script>
<script>
    $(document).ready(function () {
 
        var searchInput = $('#tipue_search_input');
        searchInput.tipuesearch({
            'mode': 'json',
            'minimumLength': 2,
            'contentLocation': '/tipuesearch/tipuesearch_content.json',
            highlightEveryTerm: true
        });
 
        $('#search-form').on('submit', function (e) {
            e.preventDefault();
            $('#tipue_search_content').show();
            $('#content').hide();
        });
 
        searchInput.keyup(function () {
            var length = $(this).val().length;
            if (length < 1) {
                $('#tipue_search_content').hide();
                $('#content').show();
            }
        });
    });
</script>

<!-- Gallery 
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script> -->
<script src="https://cdn.bootcss.com/featherlight/1.7.13/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'liuqingwen';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<!-- Calendar -->
<!-- Add by me, the calendar plugin, from: http://howiefh.github.io/2016/04/29/hexo-s-calendar-plugin/ -->

    <script src="/js/calendar.js"></script>
    <script src="/js/languages.js"></script>
    <script type="text/javascript">
        $(function() {
            
                //The same in else! edited by me.....
                $('#calendar').aCalendar('zh-CN',{single:true, root:'calendar/'});
                
                
                    $('#calendar-sample').aCalendar('zh-CN',{single:true, root:'calendar/'});
                
                //Error in the below line:
                //$('#calendar').aCalendar('zh-CN', $.extend(JSON.parse('{"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"dayOfWeekShort":["S","M","T","W","T","F","S"],"dayOfWeek":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"postsMonthTip":"Posts published in LMM yyyy","titleFormat":"yyyy LMM","titleLinkFormat":"/archives/yyyy/MM/","headArrows":{"previous":null,"next":null},"footArrows":{"previous":"Â«","next":"Â»"},"weekOffset":0,"single":true,"root":"/calendar/","url":"/calendar.json"}'), {single:true, root:'calendar/'});
            
        });
    </script>


<!-- Calculator of Blog Viewers -->
<!-- Added by me, http://ibruce.info/2015/04/04/busuanzi/ || http://busuanzi.ibruce.info/-->

    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



</body>

</html>